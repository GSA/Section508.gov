"use strict";(self.webpackChunk_articulate_mondrian_bundles=self.webpackChunk_articulate_mondrian_bundles||[]).push([[731],{9112:(t,e,i)=>{i.r(e),i.d(e,{createUpgradePath:()=>Mz,getConverter:()=>$z,getTransformSteps:()=>Kz,getVersionClaim:()=>Gz,upgrade:()=>Yz});var n=i(2),a=i(3537),o=i(8683),l=i(6195);const r=l.z.object({id:l.z.string(),path:l.z.string(),name:l.z.string(),width:l.z.number().optional(),height:l.z.number().optional()}),z=l.z.object({unit:l.z.enum(["px","%","auto","fr"]),value:l.z.number()}),d=l.z.object({applied:l.z.boolean().default(!1),type:l.z.enum(["none","fill"]).default("none"),color:l.z.string().default("#000000"),opacity:l.z.number().default(1),style:l.z.enum(["solid","dashed","dotted"]).default("solid"),width:z.default({value:1,unit:"px"})}),u=l.z.object({assetId:l.z.string().optional(),color:l.z.string().optional(),opacity:l.z.number().min(0).max(1).default(1)}),s=u.extend({type:l.z.literal("color"),color:l.z.string().default("#e4e4e4")}),c=l.z.object({width:l.z.number(),height:l.z.number(),left:l.z.number(),top:l.z.number()}),p=u.extend({type:l.z.literal("image"),assetId:l.z.string(),crop:c.default({width:1,height:1,left:0,top:0})}),m=u.extend({type:l.z.literal("none")}),b=l.z.discriminatedUnion("type",[s,p,m]),g=l.z.discriminatedUnion("type",[s,m]),f=l.z.object({top:z.default({value:0,unit:"px"}),left:z.default({value:0,unit:"px"}),bottom:z.default({value:0,unit:"px"}),right:z.default({value:0,unit:"px"})}),y=l.z.object({id:l.z.string(),name:l.z.string().max(128)}),x=y.extend({x:z.default({value:0,unit:"px"}),y:z.default({value:0,unit:"px"}),xOffset:l.z.number().default(0),yOffset:l.z.number().default(0),position:l.z.literal("absolute").default("absolute"),width:z.default({value:100,unit:"%"}),height:z.default({value:100,unit:"%"}),padding:f,fill:b,overlay:g,aspectRatioLocked:l.z.boolean(),border:d,borderRadius:l.z.object({applied:l.z.boolean().default(!1),topLeft:z.default({value:0,unit:"px"}),topRight:z.default({value:0,unit:"px"}),bottomRight:z.default({value:0,unit:"px"}),bottomLeft:z.default({value:0,unit:"px"})}),rotation:l.z.number().default(0),flipX:l.z.boolean().default(!1),flipY:l.z.boolean().default(!1)}),h=l.z.object({id:l.z.string(),event:l.z.enum(["click","hover"])}),v=h.extend({action:l.z.literal("changeState"),targetId:l.z.string(),targetState:l.z.string().default("default")}),j=h.extend({action:l.z.literal("changeVisibility"),targetId:l.z.string(),targetVisibility:l.z.boolean()}),k=l.z.discriminatedUnion("action",[v,j]),I=t=>l.z.intersection(y,t.partial()),S=t=>l.z.intersection(l.z.object({default:t}),l.z.record(I(t))),w=t=>l.z.object({id:l.z.string(),blockumentId:l.z.string(),clonedFromId:l.z.string().optional(),parentId:l.z.string(),type:l.z.string(),name:l.z.string().max(128),tagName:l.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:l.z.boolean().default(!1),authoringVisible:l.z.boolean().default(!0),initialVisible:l.z.boolean().default(!0),initialState:l.z.string().default("default"),states:S(t),triggers:l.z.array(k),assets:l.z.record(r).default({}).optional(),removed:l.z.boolean().default(!1)}),P=(I(x),l.z.object({id:l.z.string(),clonedFromId:l.z.string().optional(),state:l.z.string(),visible:l.z.boolean()})),R=l.z.object({id:l.z.string(),title:l.z.string().max(255),children:l.z.array(P).max(1)}),U=x.extend({children:l.z.array(P)}),V=w(U).extend({type:l.z.literal("group")}),_=(I(U),x.extend({altText:l.z.string().default("")})),L=w(_).extend({type:l.z.literal("image")}),O=(I(_),l.z.intersection(l.z.object({type:l.z.string().optional(),attrs:l.z.record(l.z.any()).optional(),content:l.z.array(l.z.lazy((()=>O))).optional(),marks:l.z.array(l.z.intersection(l.z.object({type:l.z.string(),attrs:l.z.record(l.z.any()).optional()}),l.z.record(l.z.any()))).optional(),text:l.z.string().optional()}),l.z.record(l.z.any()))),C=l.z.object({id:l.z.string(),type:l.z.literal("tiptap"),json:O}),E=l.z.enum(["top","middle","bottom"]),F=x.extend({text:C,textVerticalAlign:E.default("top")}),X=w(F).extend({type:l.z.literal("text")}),A=(I(F),F.extend({clipPath:l.z.literal("ellipse").nullable().default(null),altText:l.z.string().nullable().default(null)})),T=w(A).extend({type:l.z.literal("shape")}),D=(I(A),l.z.object({default:l.z.string()})),N=x.extend({videoSources:D}),q=w(N).extend({type:l.z.literal("video")}),B=(I(N),l.z.discriminatedUnion("type",[V,L,T,X,q])),Y=l.z.object({blockuments:l.z.record(R).optional(),items:l.z.record(B).optional()});var M;!function(t){t.APP="app",t.BLOCKUMENT="blockument",t.COURSE="course"}(M||(M={}));const K=l.z.object({id:l.z.string(),path:l.z.string(),name:l.z.string(),width:l.z.number().optional(),height:l.z.number().optional()}),$=l.z.object({unit:l.z.enum(["px","%","auto","fr"]),value:l.z.number()}),G=l.z.object({applied:l.z.boolean().default(!1),type:l.z.enum(["none","fill"]).default("none"),color:l.z.string().default("#000000"),opacity:l.z.number().default(1),style:l.z.enum(["solid","dashed","dotted"]).default("solid"),width:$.default({value:1,unit:"px"})}),H=l.z.object({assetId:l.z.string().optional(),color:l.z.string().optional(),opacity:l.z.number().min(0).max(1).default(1)}),J=H.extend({type:l.z.literal("color"),color:l.z.string().default("#e4e4e4")}),Q=l.z.object({width:l.z.number(),height:l.z.number(),left:l.z.number(),top:l.z.number()}),W=H.extend({type:l.z.literal("image"),assetId:l.z.string(),crop:Q.default({width:1,height:1,left:0,top:0})}),Z=H.extend({type:l.z.literal("none")}),tt=l.z.discriminatedUnion("type",[J,W,Z]),et=l.z.discriminatedUnion("type",[J,Z]),it=l.z.object({top:$.default({value:0,unit:"px"}),left:$.default({value:0,unit:"px"}),bottom:$.default({value:0,unit:"px"}),right:$.default({value:0,unit:"px"})}),nt=l.z.object({id:l.z.string(),name:l.z.string().max(128)}),at=nt.extend({x:$.default({value:0,unit:"px"}),y:$.default({value:0,unit:"px"}),xOffset:l.z.number().default(0),yOffset:l.z.number().default(0),position:l.z.literal("absolute").default("absolute"),width:$.default({value:100,unit:"%"}),height:$.default({value:100,unit:"%"}),padding:it,fill:tt,overlay:et,aspectRatioLocked:l.z.boolean(),border:G,borderRadius:l.z.object({applied:l.z.boolean().default(!1),topLeft:$.default({value:0,unit:"px"}),topRight:$.default({value:0,unit:"px"}),bottomRight:$.default({value:0,unit:"px"}),bottomLeft:$.default({value:0,unit:"px"})}),rotation:l.z.number().default(0),flipX:l.z.boolean().default(!1),flipY:l.z.boolean().default(!1)}),ot=t=>l.z.intersection(nt,t.partial()),lt=t=>l.z.intersection(l.z.object({default:t}),l.z.record(ot(t))),rt=t=>l.z.object({id:l.z.string(),blockumentId:l.z.string(),clonedFromId:l.z.string().optional(),parentId:l.z.string(),type:l.z.string(),name:l.z.string().max(128),tagName:l.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:l.z.boolean().default(!1),authoringVisible:l.z.boolean().default(!0),initialVisible:l.z.boolean().default(!0),initialState:l.z.string().default("default"),states:lt(t),assets:l.z.record(K).default({}).optional(),removed:l.z.boolean().default(!1)}),zt=(ot(at),l.z.object({id:l.z.string(),clonedFromId:l.z.string().optional(),state:l.z.string(),visible:l.z.boolean()})),dt=l.z.object({id:l.z.string(),event:l.z.enum(["click","hover","mediaPlay","mediaPause","mediaEnd"]),sourceId:l.z.string().optional()}),ut=dt.extend({action:l.z.enum(["mediaPause","mediaPlay","mediaEnd"]),targetId:l.z.string()}),st=dt.extend({action:l.z.literal("changeState"),targetId:l.z.string(),targetState:l.z.string().default("default")}),ct=dt.extend({action:l.z.literal("changeVisibility"),targetId:l.z.string(),targetVisibility:l.z.boolean()}),pt=l.z.discriminatedUnion("action",[st,ct,ut]),mt=l.z.object({id:l.z.string(),title:l.z.string().max(255),children:l.z.array(zt).max(1),triggers:l.z.array(pt)}),bt=at.extend({children:l.z.array(zt)}),gt=rt(bt).extend({type:l.z.literal("group")}),ft=(ot(bt),at.extend({altText:l.z.string().default("")})),yt=rt(ft).extend({type:l.z.literal("image")}),xt=(ot(ft),l.z.intersection(l.z.object({type:l.z.string().optional(),attrs:l.z.record(l.z.any()).optional(),content:l.z.array(l.z.lazy((()=>xt))).optional(),marks:l.z.array(l.z.intersection(l.z.object({type:l.z.string(),attrs:l.z.record(l.z.any()).optional()}),l.z.record(l.z.any()))).optional(),text:l.z.string().optional()}),l.z.record(l.z.any()))),ht=l.z.object({id:l.z.string(),type:l.z.literal("tiptap"),json:xt}),vt=l.z.enum(["top","middle","bottom"]),jt=at.extend({text:ht,textVerticalAlign:vt.default("top")}),kt=rt(jt).extend({type:l.z.literal("text")}),It=(ot(jt),jt.extend({clipPath:l.z.literal("ellipse").nullable().default(null),altText:l.z.string().nullable().default(null)})),St=rt(It).extend({type:l.z.literal("shape")}),wt=(ot(It),l.z.object({default:l.z.string()})),Pt=at.extend({videoSources:wt}),Rt=rt(Pt).extend({type:l.z.literal("video")}),Ut=(ot(Pt),l.z.discriminatedUnion("type",[gt,yt,St,kt,Rt])),Vt=l.z.object({blockuments:l.z.record(mt).optional(),items:l.z.record(Ut).optional()});var _t;!function(t){t.APP="app",t.BLOCKUMENT="blockument",t.COURSE="course"}(_t||(_t={}));var Lt=i(3134),Ot=i(4348);const Ct=l.z.object({id:l.z.string(),path:l.z.string(),name:l.z.string(),width:l.z.number().optional(),height:l.z.number().optional()}),Et=l.z.object({unit:l.z.enum(["px","%","auto","fr"]),value:l.z.number()}),Ft=l.z.object({applied:l.z.boolean().default(!1),type:l.z.enum(["none","fill"]).default("none"),color:l.z.string().default("#000000"),opacity:l.z.number().default(1),style:l.z.enum(["solid","dashed","dotted"]).default("solid"),width:Et.default({value:1,unit:"px"})}),Xt=l.z.object({assetId:l.z.string().optional(),color:l.z.string().optional(),opacity:l.z.number().min(0).max(1).default(1)}),At=Xt.extend({type:l.z.literal("color"),color:l.z.string().default("#e4e4e4")}),Tt=l.z.object({width:l.z.number(),height:l.z.number(),left:l.z.number(),top:l.z.number()}),Dt=Xt.extend({type:l.z.literal("image"),assetId:l.z.string(),crop:Tt.default({width:1,height:1,left:0,top:0})}),Nt=Xt.extend({type:l.z.literal("none")}),qt=l.z.discriminatedUnion("type",[At,Dt,Nt]),Bt=l.z.discriminatedUnion("type",[At,Nt]),Yt=l.z.object({top:Et.default({value:0,unit:"px"}),left:Et.default({value:0,unit:"px"}),bottom:Et.default({value:0,unit:"px"}),right:Et.default({value:0,unit:"px"})}),Mt=l.z.object({id:l.z.string(),name:l.z.string().max(128)}),Kt=Mt.extend({x:Et.default({value:0,unit:"px"}),y:Et.default({value:0,unit:"px"}),xOffset:l.z.number().default(0),yOffset:l.z.number().default(0),position:l.z.literal("absolute").default("absolute"),width:Et.default({value:100,unit:"%"}),height:Et.default({value:100,unit:"%"}),padding:Yt,fill:qt,overlay:Bt,aspectRatioLocked:l.z.boolean(),border:Ft,borderRadius:l.z.object({applied:l.z.boolean().default(!1),topLeft:Et.default({value:0,unit:"px"}),topRight:Et.default({value:0,unit:"px"}),bottomRight:Et.default({value:0,unit:"px"}),bottomLeft:Et.default({value:0,unit:"px"})}),rotation:l.z.number().default(0),flipX:l.z.boolean().default(!1),flipY:l.z.boolean().default(!1)}),$t=t=>l.z.intersection(Mt,t.partial()),Gt=t=>l.z.intersection(l.z.object({default:t}),l.z.record($t(t))),Ht=t=>l.z.object({id:l.z.string(),blockumentId:l.z.string(),clonedFromId:l.z.string().optional(),parentId:l.z.string(),type:l.z.string(),name:l.z.string().max(128),tagName:l.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:l.z.boolean().default(!1),authoringVisible:l.z.boolean().default(!0),initialVisible:l.z.boolean().default(!0),initialState:l.z.string().default("default"),states:Gt(t),assets:l.z.record(Ct).default({}).optional(),removed:l.z.boolean().default(!1),_v:l.z.literal(3)}),Jt=($t(Kt),l.z.object({default:l.z.string()})),Qt=Kt.extend({audioSources:Jt}),Wt=Ht(Qt).extend({type:l.z.literal("audio")}),Zt=($t(Qt),l.z.object({id:l.z.string(),clonedFromId:l.z.string().optional(),state:l.z.string(),visible:l.z.boolean()})),te=l.z.object({id:l.z.string(),event:l.z.enum(["click","hover","mediaPlay","mediaPause","mediaEnd"]),sourceId:l.z.string().optional()}),ee=te.extend({action:l.z.enum(["mediaPause","mediaPlay","mediaEnd"]),targetId:l.z.string()}),ie=te.extend({action:l.z.literal("changeState"),targetId:l.z.string(),targetState:l.z.string().default("default")}),ne=te.extend({action:l.z.literal("changeVisibility"),targetId:l.z.string(),targetVisibility:l.z.boolean()}),ae=l.z.discriminatedUnion("action",[ie,ne,ee]),oe=l.z.object({id:l.z.string(),title:l.z.string().max(255),children:l.z.array(Zt).max(1),triggers:l.z.array(ae),_v:l.z.literal(3)}),le=Kt.extend({children:l.z.array(Zt)}),re=Ht(le).extend({type:l.z.literal("group")}),ze=($t(le),l.z.intersection(l.z.object({type:l.z.string().optional(),attrs:l.z.record(l.z.any()).optional(),content:l.z.array(l.z.lazy((()=>ze))).optional(),marks:l.z.array(l.z.intersection(l.z.object({type:l.z.string(),attrs:l.z.record(l.z.any()).optional()}),l.z.record(l.z.any()))).optional(),text:l.z.string().optional()}),l.z.record(l.z.any()))),de=l.z.object({id:l.z.string(),type:l.z.literal("tiptap"),json:ze}),ue=l.z.enum(["top","middle","bottom"]),se=Kt.extend({text:de,textVerticalAlign:ue.default("top")}),ce=Ht(se).extend({type:l.z.literal("text")}),pe=($t(se),se.extend({clipPath:l.z.literal("ellipse").nullable().default(null),altText:l.z.string().nullable().default(null)})),me=Ht(pe).extend({type:l.z.literal("shape")}),be=($t(pe),l.z.object({default:l.z.string()})),ge=Kt.extend({videoSources:be}),fe=Ht(ge).extend({type:l.z.literal("video")}),ye=($t(ge),l.z.discriminatedUnion("type",[Wt,re,me,ce,fe])),xe=l.z.object({blockuments:l.z.record(oe).optional(),items:l.z.record(ye).optional()});var he;!function(t){t.APP="app",t.BLOCKUMENT="blockument",t.COURSE="course"}(he||(he={}));var ve=i(4816);function je(t,e,i){const{default:n,...a}=t;return{default:e(n),...ve(a,i)}}function ke(t){return{...t,altText:"altText"in t?t.altText??null:void 0}}function Ie(t){return{...t,clipPath:null,altText:t.altText??null,text:{id:crypto.randomUUID(),type:"tiptap",json:{type:"doc",content:[]}},textVerticalAlign:"middle"}}function Se(t){return"image"===t.type?function(t){return{...t,_v:3,type:"shape",states:je(t.states,Ie,ke)}}(t):{...t,_v:3}}const we=l.z.object({id:l.z.string(),path:l.z.string(),name:l.z.string(),width:l.z.number().optional(),height:l.z.number().optional()}),Pe=l.z.object({unit:l.z.enum(["px","%","auto","fr"]),value:l.z.number()}),Re=l.z.object({applied:l.z.boolean().default(!1),type:l.z.enum(["none","fill"]).default("none"),color:l.z.string().default("#000000"),opacity:l.z.number().default(1),style:l.z.enum(["solid","dashed","dotted"]).default("solid"),width:Pe.default({value:1,unit:"px"})}),Ue=l.z.object({assetId:l.z.string().optional(),color:l.z.string().optional(),opacity:l.z.number().min(0).max(1).default(1)}),Ve=Ue.extend({type:l.z.literal("color"),color:l.z.string().default("#e4e4e4")}),_e=l.z.object({width:l.z.number(),height:l.z.number(),left:l.z.number(),top:l.z.number()}),Le=Ue.extend({type:l.z.literal("image"),assetId:l.z.string(),crop:_e.default({width:1,height:1,left:0,top:0})}),Oe=Ue.extend({type:l.z.literal("none")}),Ce=l.z.discriminatedUnion("type",[Ve,Le,Oe]),Ee=l.z.discriminatedUnion("type",[Ve,Oe]),Fe=l.z.object({top:Pe.default({value:0,unit:"px"}),left:Pe.default({value:0,unit:"px"}),bottom:Pe.default({value:0,unit:"px"}),right:Pe.default({value:0,unit:"px"})}),Xe=l.z.object({type:l.z.literal("rectangle"),borderRadius:l.z.object({topLeft:l.z.number(),topRight:l.z.number(),bottomRight:l.z.number(),bottomLeft:l.z.number()}).optional()}),Ae=l.z.object({type:l.z.literal("ellipse")}),Te=l.z.object({type:l.z.literal("star"),sidePairs:l.z.number().min(3),innerRadius:l.z.number().min(.1).max(1)}),De=l.z.object({type:l.z.literal("cloud")}),Ne=l.z.discriminatedUnion("type",[Xe,Ae,Te,De]),qe=l.z.object({id:l.z.string(),name:l.z.string().max(128)}),Be=qe.extend({x:Pe.default({value:0,unit:"px"}),y:Pe.default({value:0,unit:"px"}),xOffset:l.z.number().default(0),yOffset:l.z.number().default(0),position:l.z.literal("absolute").default("absolute"),width:Pe.default({value:100,unit:"%"}),height:Pe.default({value:100,unit:"%"}),padding:Fe,fill:Ce,overlay:Ee,aspectRatioLocked:l.z.boolean(),border:Re,clipDef:Ne.default({type:"rectangle"}),rotation:l.z.number().default(0),flipX:l.z.boolean().default(!1),flipY:l.z.boolean().default(!1)}),Ye=t=>l.z.intersection(qe,t.partial()),Me=t=>l.z.intersection(l.z.object({default:t}),l.z.record(Ye(t))),Ke=t=>l.z.object({id:l.z.string(),blockumentId:l.z.string(),clonedFromId:l.z.string().optional(),parentId:l.z.string(),type:l.z.string(),name:l.z.string().max(128),tagName:l.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:l.z.boolean().default(!1),authoringVisible:l.z.boolean().default(!0),initialVisible:l.z.boolean().default(!0),initialState:l.z.string().default("default"),states:Me(t),assets:l.z.record(we).default({}).optional(),removed:l.z.boolean().default(!1),_v:l.z.literal(4)}),$e=(Ye(Be),l.z.object({default:l.z.string()})),Ge=Be.extend({audioSources:$e}),He=Ke(Ge).extend({type:l.z.literal("audio")}),Je=(Ye(Ge),l.z.object({id:l.z.string(),clonedFromId:l.z.string().optional(),state:l.z.string(),visible:l.z.boolean()})),Qe=l.z.object({id:l.z.string(),event:l.z.enum(["click","hover","mediaPlay","mediaPause","mediaEnd"]),sourceId:l.z.string().optional()}),We=Qe.extend({action:l.z.enum(["mediaPause","mediaPlay","mediaEnd"]),targetId:l.z.string()}),Ze=Qe.extend({action:l.z.literal("changeState"),targetId:l.z.string(),targetState:l.z.string().default("default")}),ti=Qe.extend({action:l.z.literal("changeVisibility"),targetId:l.z.string(),targetVisibility:l.z.boolean()}),ei=l.z.discriminatedUnion("action",[Ze,ti,We]),ii=l.z.object({id:l.z.string(),title:l.z.string().max(255),children:l.z.array(Je).max(1),triggers:l.z.array(ei),fonts:l.z.record(l.z.string()).optional(),_v:l.z.literal(4)}),ni=Be.extend({children:l.z.array(Je)}),ai=Ke(ni).extend({type:l.z.literal("group")}),oi=(Ye(ni),l.z.intersection(l.z.object({type:l.z.string().optional(),attrs:l.z.record(l.z.any()).optional(),content:l.z.array(l.z.lazy((()=>oi))).optional(),marks:l.z.array(l.z.intersection(l.z.object({type:l.z.string(),attrs:l.z.record(l.z.any()).optional()}),l.z.record(l.z.any()))).optional(),text:l.z.string().optional()}),l.z.record(l.z.any()))),li=l.z.object({id:l.z.string(),type:l.z.literal("tiptap"),json:oi}),ri=l.z.enum(["top","middle","bottom"]),zi=Be.extend({text:li,textVerticalAlign:ri.default("top")}),di=Ke(zi).extend({type:l.z.literal("text")}),ui=(Ye(zi),zi.extend({altText:l.z.string().nullable().default(null)})),si=Ke(ui).extend({type:l.z.literal("shape")}),ci=(Ye(ui),l.z.object({default:l.z.string()})),pi=Be.extend({videoSources:ci}),mi=Ke(pi).extend({type:l.z.literal("video")}),bi=(Ye(pi),l.z.discriminatedUnion("type",[He,ai,si,di,mi])),gi=l.z.object({blockuments:l.z.record(ii).optional(),items:l.z.record(bi).optional()});function fi(t){return t.applied?{type:"rectangle",borderRadius:{topLeft:t.topLeft.value,topRight:t.topRight.value,bottomRight:t.bottomRight.value,bottomLeft:t.bottomLeft.value}}:{type:"rectangle"}}function yi(t){const{clipPath:e,borderRadius:i,...n}=t;return"ellipse"===e?{...n,clipDef:{type:"ellipse"}}:{...n,clipDef:fi(i)}}function xi(t){const{borderRadius:e,...i}=t;return{...i,clipDef:fi(e)}}function hi(t){const{borderRadius:e,...i}=t;return e?{...i,clipDef:fi(e)}:{...i}}function vi(t){if("shape"===t.type)return{...t,_v:4,states:je(t.states,yi,(e=>function(t,e){const{clipPath:i,borderRadius:n,...a}=t;return"ellipse"===i?{...a,clipDef:{type:"ellipse"}}:"ellipse"===e.clipPath?{...a}:n?{...a,clipDef:fi(n)}:{...a}}(e,t.states.default)))};if("text"===t.type)return{...t,_v:4,states:je(t.states,xi,hi)};if("video"===t.type)return{...t,_v:4,states:je(t.states,xi,hi)};if("group"===t.type)return{...t,_v:4,states:je(t.states,xi,hi)};if("audio"===t.type)return{...t,_v:4,states:je(t.states,xi,hi)};throw new Error("Internal error: should be unreachable")}const ji=l.z.object({id:l.z.string(),path:l.z.string(),name:l.z.string(),width:l.z.number().optional(),height:l.z.number().optional()}),ki=l.z.object({unit:l.z.enum(["px","%","auto","fr"]),value:l.z.number()}),Ii=l.z.object({applied:l.z.boolean().default(!1),type:l.z.enum(["none","fill"]).default("none"),color:l.z.string().default("#000000"),opacity:l.z.number().default(1),style:l.z.enum(["solid","dashed","dotted"]).default("solid"),width:ki.default({value:1,unit:"px"})}),Si=l.z.object({assetId:l.z.string().optional(),color:l.z.string().optional(),opacity:l.z.number().min(0).max(1).default(1)}),wi=Si.extend({type:l.z.literal("color"),color:l.z.string().default("#e4e4e4")}),Pi=l.z.object({width:l.z.number(),height:l.z.number(),left:l.z.number(),top:l.z.number()}),Ri=Si.extend({type:l.z.literal("image"),assetId:l.z.string(),crop:Pi.default({width:1,height:1,left:0,top:0})}),Ui=Si.extend({type:l.z.literal("none")}),Vi=l.z.discriminatedUnion("type",[wi,Ri,Ui]),_i=l.z.discriminatedUnion("type",[wi,Ui]),Li=l.z.object({top:ki.default({value:0,unit:"px"}),left:ki.default({value:0,unit:"px"}),bottom:ki.default({value:0,unit:"px"}),right:ki.default({value:0,unit:"px"})}),Oi=l.z.object({type:l.z.literal("rectangle"),borderRadius:l.z.object({topLeft:l.z.number(),topRight:l.z.number(),bottomRight:l.z.number(),bottomLeft:l.z.number()}).optional()}),Ci=l.z.object({type:l.z.literal("ellipse")}),Ei=l.z.object({type:l.z.literal("star"),sidePairs:l.z.number().min(3),innerRadius:l.z.number().min(.1).max(1)}),Fi=l.z.object({type:l.z.literal("cloud")}),Xi=l.z.object({type:l.z.literal("plus"),stroke:l.z.number().min(.01).max(1)}),Ai=l.z.object({type:l.z.literal("triangle")}),Ti=l.z.object({type:l.z.literal("bookmark"),cutoutInset:l.z.number().min(0).max(.8)}),Di=l.z.object({type:l.z.literal("chevron"),outsideCornerXCoords:l.z.number().min(.7).max(1),insideCenterXCoord:l.z.number().min(0).max(.3)}),Ni=l.z.object({type:l.z.literal("octagon")}),qi=l.z.object({type:l.z.literal("parallelogram"),shear:l.z.number().min(0).max(1)}),Bi=l.z.discriminatedUnion("type",[Ti,Di,Fi,Ci,Ni,Xi,Oi,Ei,Ai,qi]),Yi=l.z.object({id:l.z.string(),name:l.z.string().max(128)}),Mi=Yi.extend({x:ki.default({value:0,unit:"px"}),y:ki.default({value:0,unit:"px"}),xOffset:l.z.number().default(0),yOffset:l.z.number().default(0),position:l.z.literal("absolute").default("absolute"),width:ki.default({value:100,unit:"%"}),height:ki.default({value:100,unit:"%"}),padding:Li,fill:Vi,overlay:_i,aspectRatioLocked:l.z.boolean(),border:Ii,clipDef:Bi.default({type:"rectangle"}),rotation:l.z.number().default(0),flipX:l.z.boolean().default(!1),flipY:l.z.boolean().default(!1),authoringAspectRatioCropLock:l.z.enum(["freeform","preset","none"])}),Ki=t=>l.z.intersection(Yi,t.partial()),$i=t=>l.z.intersection(l.z.object({default:t}),l.z.record(Ki(t))),Gi=t=>l.z.object({id:l.z.string(),blockumentId:l.z.string(),clonedFromId:l.z.string().optional(),parentId:l.z.string(),type:l.z.string(),name:l.z.string().max(128),tagName:l.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:l.z.boolean().default(!1),authoringVisible:l.z.boolean().default(!0),initialVisible:l.z.boolean().default(!0),initialState:l.z.string().default("default"),states:$i(t),assets:l.z.record(ji).default({}).optional(),removed:l.z.boolean().default(!1),_v:l.z.literal(5)}),Hi=(Ki(Mi),l.z.object({default:l.z.string()})),Ji=Mi.extend({audioSources:Hi}),Qi=Gi(Ji).extend({type:l.z.literal("audio")}),Wi=(Ki(Ji),l.z.object({id:l.z.string(),clonedFromId:l.z.string().optional(),state:l.z.string(),visible:l.z.boolean()})),Zi=l.z.object({id:l.z.string(),event:l.z.enum(["click","hover","mediaPlay","mediaPause","mediaEnd"]),sourceId:l.z.string().optional()}),tn=Zi.extend({action:l.z.enum(["mediaPause","mediaPlay","mediaEnd"]),targetId:l.z.string()}),en=Zi.extend({action:l.z.literal("changeState"),targetId:l.z.string(),targetState:l.z.string().default("default")}),nn=Zi.extend({action:l.z.literal("changeVisibility"),targetId:l.z.string(),targetVisibility:l.z.boolean()}),an=l.z.discriminatedUnion("action",[en,nn,tn]),on=l.z.object({id:l.z.string(),title:l.z.string().max(255),children:l.z.array(Wi).max(1),triggers:l.z.array(an),fonts:l.z.record(l.z.string()).optional(),_v:l.z.literal(5)}),ln=Mi.extend({children:l.z.array(Wi)}),rn=Gi(ln).extend({type:l.z.literal("group")}),zn=(Ki(ln),l.z.intersection(l.z.object({type:l.z.string().optional(),attrs:l.z.record(l.z.any()).optional(),content:l.z.array(l.z.lazy((()=>zn))).optional(),marks:l.z.array(l.z.intersection(l.z.object({type:l.z.string(),attrs:l.z.record(l.z.any()).optional()}),l.z.record(l.z.any()))).optional(),text:l.z.string().optional()}),l.z.record(l.z.any()))),dn=l.z.object({id:l.z.string(),type:l.z.literal("tiptap"),json:zn}),un=l.z.enum(["top","middle","bottom"]),sn=Mi.extend({text:dn,textVerticalAlign:un.default("top")}),cn=Gi(sn).extend({type:l.z.literal("text")}),pn=(Ki(sn),sn.extend({altText:l.z.string().nullable().default(null)})),mn=Gi(pn).extend({type:l.z.literal("shape")}),bn=(Ki(pn),l.z.object({default:l.z.string()})),gn=Mi.extend({videoSources:bn}),fn=Gi(gn).extend({type:l.z.literal("video")}),yn=(Ki(gn),l.z.discriminatedUnion("type",[Qi,rn,mn,cn,fn])),xn=l.z.object({blockuments:l.z.record(on).optional(),items:l.z.record(yn).optional()}),hn={authoringAspectRatioCropLock:"none"};function vn(t){return{...t,...hn}}function jn(t){const e=null!=t.width||null!=t.height?hn:null;return{...t,...e}}function kn(t){if("shape"===t.type)return{...t,_v:5,states:je(t.states,vn,jn)};if("text"===t.type)return{...t,_v:5,states:je(t.states,vn,jn)};if("video"===t.type)return{...t,_v:5,states:je(t.states,vn,jn)};if("audio"===t.type)return{...t,_v:5,states:je(t.states,vn,jn)};if("group"===t.type)return{...t,_v:5,states:je(t.states,vn,jn)};throw new Error("Unexpected item type!")}const In=l.z.object({id:l.z.string(),path:l.z.string(),name:l.z.string(),width:l.z.number().optional(),height:l.z.number().optional()}),Sn=l.z.object({unit:l.z.enum(["px","%","auto","fr"]),value:l.z.number()}),wn=l.z.object({applied:l.z.boolean().default(!1),type:l.z.enum(["none","fill"]).default("none"),color:l.z.string().default("#000000"),opacity:l.z.number().default(1),style:l.z.enum(["solid","dashed","dotted"]).default("solid"),width:Sn.default({value:1,unit:"px"})}),Pn=l.z.object({assetId:l.z.string().optional(),color:l.z.string().optional(),opacity:l.z.number().min(0).max(1).default(1)}),Rn=Pn.extend({type:l.z.literal("color"),color:l.z.string().default("#e4e4e4")}),Un=l.z.object({width:l.z.number(),height:l.z.number(),left:l.z.number(),top:l.z.number()}),Vn=Pn.extend({type:l.z.literal("image"),assetId:l.z.string(),crop:Un.default({width:1,height:1,left:0,top:0})}),_n=Pn.extend({type:l.z.literal("none")}),Ln=l.z.discriminatedUnion("type",[Rn,Vn,_n]),On=l.z.discriminatedUnion("type",[Rn,_n]),Cn=l.z.object({top:Sn.default({value:0,unit:"px"}),left:Sn.default({value:0,unit:"px"}),bottom:Sn.default({value:0,unit:"px"}),right:Sn.default({value:0,unit:"px"})}),En=l.z.object({type:l.z.literal("rectangle"),borderRadius:l.z.object({topLeft:l.z.number(),topRight:l.z.number(),bottomRight:l.z.number(),bottomLeft:l.z.number()}).optional()}),Fn=l.z.object({type:l.z.literal("ellipse")}),Xn=l.z.object({type:l.z.literal("star"),sidePairs:l.z.number().min(3),innerRadius:l.z.number().min(.1).max(1)}),An=l.z.object({type:l.z.literal("cloud")}),Tn=l.z.object({type:l.z.literal("plus"),stroke:l.z.number().min(.01).max(1)}),Dn=l.z.object({type:l.z.literal("triangle"),topVertex:l.z.number().min(0).max(1).optional()}),Nn=l.z.object({type:l.z.literal("bookmark"),cutoutInset:l.z.number().min(0).max(.8)}),qn=l.z.object({type:l.z.literal("chevron"),outsideCornerXCoords:l.z.number().min(.7).max(1),insideCenterXCoord:l.z.number().min(0).max(.3)}),Bn=l.z.object({type:l.z.literal("octagon")}),Yn=l.z.object({type:l.z.literal("parallelogram"),shear:l.z.number().min(0).max(1)}),Mn=l.z.object({type:l.z.literal("shield")}),Kn=l.z.object({type:l.z.literal("speechBubble")}),$n=l.z.object({type:l.z.literal("arrow"),thickness:l.z.number().min(.1).max(.5),headLength:l.z.number().min(.1).max(.9)}),Gn=l.z.discriminatedUnion("type",[Nn,qn,An,Fn,Bn,Tn,En,Xn,Dn,Yn,Mn,Kn,$n]),Hn=l.z.object({id:l.z.string(),name:l.z.string().max(128)}),Jn=Hn.extend({x:Sn.default({value:0,unit:"px"}),y:Sn.default({value:0,unit:"px"}),xOffset:l.z.number().default(0),yOffset:l.z.number().default(0),position:l.z.literal("absolute").default("absolute"),width:Sn.default({value:100,unit:"%"}),height:Sn.default({value:100,unit:"%"}),padding:Cn,fill:Ln,overlay:On,aspectRatioLocked:l.z.boolean(),border:wn,clipDef:Gn.default({type:"rectangle"}),rotation:l.z.number().default(0),flipX:l.z.boolean().default(!1),flipY:l.z.boolean().default(!1),authoringAspectRatioCropLock:l.z.enum(["freeform","preset","none"])}),Qn=t=>l.z.intersection(Hn,t.partial()),Wn=t=>l.z.intersection(l.z.object({default:t}),l.z.record(Qn(t))),Zn=t=>l.z.object({id:l.z.string(),blockumentId:l.z.string(),clonedFromId:l.z.string().optional(),parentId:l.z.string(),type:l.z.string(),name:l.z.string().max(128),tagName:l.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:l.z.boolean().default(!1),authoringVisible:l.z.boolean().default(!0),initialVisible:l.z.boolean().default(!0),initialState:l.z.string().default("default"),states:Wn(t),assets:l.z.record(In).default({}).optional(),removed:l.z.boolean().default(!1),_v:l.z.literal(6)}),ta=(Qn(Jn),l.z.object({default:l.z.string()})),ea=Jn.extend({audioSources:ta}),ia=Zn(ea).extend({type:l.z.literal("audio")}),na=(Qn(ea),l.z.object({id:l.z.string(),clonedFromId:l.z.string().optional(),state:l.z.string(),visible:l.z.boolean()})),aa=l.z.object({id:l.z.string(),event:l.z.enum(["click","hover","mediaPlay","mediaPause","mediaEnd"]),sourceId:l.z.string().optional()}),oa=aa.extend({action:l.z.enum(["mediaPause","mediaPlay","mediaEnd"]),targetId:l.z.string()}),la=aa.extend({action:l.z.literal("changeState"),targetId:l.z.string(),targetState:l.z.string().default("default")}),ra=aa.extend({action:l.z.literal("changeVisibility"),targetId:l.z.string(),targetVisibility:l.z.boolean()}),za=l.z.discriminatedUnion("action",[la,ra,oa]),da=l.z.object({id:l.z.string(),title:l.z.string().max(255),children:l.z.array(na).max(1),triggers:l.z.array(za),fonts:l.z.record(l.z.string()).optional(),_v:l.z.literal(6)}),ua=Jn.extend({children:l.z.array(na)}),sa=Zn(ua).extend({type:l.z.literal("group")}),ca=(Qn(ua),l.z.intersection(l.z.object({type:l.z.string().optional(),attrs:l.z.record(l.z.any()).optional(),content:l.z.array(l.z.lazy((()=>ca))).optional(),marks:l.z.array(l.z.intersection(l.z.object({type:l.z.string(),attrs:l.z.record(l.z.any()).optional()}),l.z.record(l.z.any()))).optional(),text:l.z.string().optional()}),l.z.record(l.z.any()))),pa=l.z.object({id:l.z.string(),type:l.z.literal("tiptap"),json:ca}),ma=l.z.enum(["top","middle","bottom"]),ba=l.z.object({top:l.z.number(),left:l.z.number(),bottom:l.z.number(),right:l.z.number()}),ga=Jn.extend({text:pa,textVerticalAlign:ma.default("top"),textPadding:ba}),fa=Zn(ga).extend({type:l.z.literal("text")}),ya=(Qn(ga),ga.extend({altText:l.z.string().nullable().default(null)})),xa=Zn(ya).extend({type:l.z.literal("shape")}),ha=(Qn(ya),l.z.object({default:l.z.string()})),va=Jn.extend({videoSources:ha}),ja=Zn(va).extend({type:l.z.literal("video")}),ka=(Qn(va),l.z.discriminatedUnion("type",[ia,sa,xa,fa,ja])),Ia=l.z.object({blockuments:l.z.record(da).optional(),items:l.z.record(ka).optional()});var Sa=i(3280);function wa(t){return"text"===t.type?{...t,_v:6,states:je(t.states,(t=>({...t,textPadding:Sa.un})),(t=>t))}:"shape"===t.type?{...t,_v:6,states:je(t.states,(t=>({...t,textPadding:Sa.Mw})),(t=>t))}:{...t,_v:6}}const Pa=l.z.object({id:l.z.string(),path:l.z.string(),name:l.z.string(),width:l.z.number().optional(),height:l.z.number().optional()}),Ra=l.z.object({unit:l.z.enum(["px","%","auto","fr"]),value:l.z.number()}),Ua=l.z.object({applied:l.z.boolean().default(!1),type:l.z.enum(["none","fill"]).default("none"),color:l.z.string().default("#000000"),opacity:l.z.number().default(1),style:l.z.enum(["solid","dashed","dotted"]).default("solid"),width:Ra.default({value:1,unit:"px"})}),Va=l.z.object({assetId:l.z.string().optional(),color:l.z.string().optional(),opacity:l.z.number().min(0).max(1).default(1)}),_a=Va.extend({type:l.z.literal("color"),color:l.z.string().default("#e4e4e4")}),La=l.z.object({width:l.z.number(),height:l.z.number(),left:l.z.number(),top:l.z.number()}),Oa=Va.extend({type:l.z.literal("image"),assetId:l.z.string(),crop:La.default({width:1,height:1,left:0,top:0})}),Ca=Va.extend({type:l.z.literal("none")}),Ea=l.z.discriminatedUnion("type",[_a,Oa,Ca]),Fa=l.z.discriminatedUnion("type",[_a,Ca]),Xa=l.z.object({top:Ra.default({value:0,unit:"px"}),left:Ra.default({value:0,unit:"px"}),bottom:Ra.default({value:0,unit:"px"}),right:Ra.default({value:0,unit:"px"})}),Aa=l.z.object({type:l.z.literal("rectangle"),borderRadius:l.z.object({topLeft:l.z.number(),topRight:l.z.number(),bottomRight:l.z.number(),bottomLeft:l.z.number()}).optional()}),Ta=l.z.object({type:l.z.literal("ellipse")}),Da=l.z.object({type:l.z.literal("star"),sidePairs:l.z.number().min(3),innerRadius:l.z.number().min(.1).max(1)}),Na=l.z.object({type:l.z.literal("cloud")}),qa=l.z.object({type:l.z.literal("plus"),stroke:l.z.number().min(.01).max(1)}),Ba=l.z.object({type:l.z.literal("triangle"),topVertex:l.z.number().min(0).max(1).optional()}),Ya=l.z.object({type:l.z.literal("bookmark"),cutoutInset:l.z.number().min(0).max(.8)}),Ma=l.z.object({type:l.z.literal("chevron"),outsideCornerXCoords:l.z.number().min(.7).max(1),insideCenterXCoord:l.z.number().min(0).max(.3)}),Ka=l.z.object({type:l.z.literal("octagon")}),$a=l.z.object({type:l.z.literal("parallelogram"),shear:l.z.number().min(0).max(1)}),Ga=l.z.object({type:l.z.literal("shield")}),Ha=l.z.object({type:l.z.literal("speechBubble")}),Ja=l.z.object({type:l.z.literal("arrow"),thickness:l.z.number().min(.1).max(.5),headLength:l.z.number().min(.1).max(.9)}),Qa=l.z.discriminatedUnion("type",[Ya,Ma,Na,Ta,Ka,qa,Aa,Da,Ba,$a,Ga,Ha,Ja]),Wa=l.z.object({id:l.z.string(),name:l.z.string().max(128)}),Za=Wa.extend({x:Ra.default({value:0,unit:"px"}),y:Ra.default({value:0,unit:"px"}),xOffset:l.z.number().default(0),yOffset:l.z.number().default(0),position:l.z.literal("absolute").default("absolute"),width:Ra.default({value:100,unit:"%"}),height:Ra.default({value:100,unit:"%"}),padding:Xa,fill:Ea,overlay:Fa,aspectRatioLocked:l.z.boolean(),border:Ua,clipDef:Qa.default({type:"rectangle"}),rotation:l.z.number().default(0),flipX:l.z.boolean().default(!1),flipY:l.z.boolean().default(!1),authoringAspectRatioCropLock:l.z.enum(["freeform","preset","none"])}),to=t=>l.z.intersection(Wa,t.partial()),eo=t=>l.z.intersection(l.z.object({default:t}),l.z.record(to(t))),io=t=>l.z.object({id:l.z.string(),blockumentId:l.z.string(),clonedFromId:l.z.string().optional(),parentId:l.z.string(),type:l.z.string(),name:l.z.string().max(128),tagName:l.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:l.z.boolean().default(!1),authoringVisible:l.z.boolean().default(!0),initialVisible:l.z.boolean().default(!0),initialState:l.z.string().default("default"),states:eo(t),assets:l.z.record(Pa).default({}).optional(),removed:l.z.boolean().default(!1),_v:l.z.literal(7)}),no=(to(Za),l.z.object({default:l.z.string()})),ao=Za.extend({audioSources:no}),oo=io(ao).extend({type:l.z.literal("audio")}),lo=(to(ao),l.z.object({id:l.z.string(),clonedFromId:l.z.string().optional(),state:l.z.string(),visible:l.z.boolean()})),ro=l.z.object({id:l.z.string(),event:l.z.enum(["click","hover","mediaPlay","mediaPause","mediaEnd"]),sourceId:l.z.string().optional()}),zo=ro.extend({action:l.z.enum(["mediaPause","mediaPlay","mediaEnd"]),targetId:l.z.string()}),uo=ro.extend({action:l.z.literal("changeState"),targetId:l.z.string(),targetState:l.z.string().default("default")}),so=ro.extend({action:l.z.literal("changeVisibility"),targetId:l.z.string(),targetVisibility:l.z.boolean()}),co=l.z.discriminatedUnion("action",[uo,so,zo]),po=l.z.object({id:l.z.string(),title:l.z.string().max(255),children:l.z.array(lo).max(1),triggers:l.z.array(co),fonts:l.z.record(l.z.string()).optional(),_v:l.z.literal(7)}),mo=Za.extend({children:l.z.array(lo)}),bo=io(mo).extend({type:l.z.literal("group")}),go=(to(mo),l.z.intersection(l.z.object({type:l.z.string().optional(),attrs:l.z.record(l.z.any()).optional(),content:l.z.array(l.z.lazy((()=>go))).optional(),marks:l.z.array(l.z.intersection(l.z.object({type:l.z.string(),attrs:l.z.record(l.z.any()).optional()}),l.z.record(l.z.any()))).optional(),text:l.z.string().optional()}),l.z.record(l.z.any()))),fo=l.z.object({id:l.z.string(),type:l.z.literal("tiptap"),json:go}),yo=l.z.enum(["top","middle","bottom"]),xo=l.z.object({top:l.z.number(),left:l.z.number(),bottom:l.z.number(),right:l.z.number()}),ho=Za.extend({text:fo,textVerticalAlign:yo.default("top"),textPadding:xo}),vo=io(ho).extend({type:l.z.literal("text")}),jo=(to(ho),ho.extend({altText:l.z.string().nullable().default(null)})),ko=io(jo).extend({type:l.z.literal("shape")}),Io=(to(jo),l.z.object({default:l.z.string()})),So=Za.extend({videoSources:Io}),wo=io(So).extend({type:l.z.literal("video")}),Po=(to(So),l.z.discriminatedUnion("type",[oo,bo,ko,vo,wo])),Ro=l.z.object({blockuments:l.z.record(po).optional(),items:l.z.record(Po).optional()});function Uo(t,e){const i=e.width?.value??t.width.value,n=i<=100?8:i>300?32:16;return{top:16,left:n,bottom:16,right:n}}function Vo(t){return"shape"===t.type?{...t,states:(e=t.states,je(e,(t=>({...t,textPadding:Uo(t,t)})),(t=>t.textPadding||t.width?{...t,textPadding:Uo(e.default,t)}:t))),_v:7}:{...t,_v:7};var e}const _o=l.z.object({id:l.z.string(),path:l.z.string(),name:l.z.string(),width:l.z.number().optional(),height:l.z.number().optional()}),Lo=l.z.object({unit:l.z.enum(["px","%","auto","fr"]),value:l.z.number()}),Oo=l.z.object({applied:l.z.boolean().default(!1),type:l.z.enum(["none","fill"]).default("none"),color:l.z.string().default("#000000"),opacity:l.z.number().default(1),style:l.z.enum(["solid","dashed","dotted"]).default("solid"),width:Lo.default({value:1,unit:"px"})}),Co=l.z.object({assetId:l.z.string().optional(),color:l.z.string().optional(),opacity:l.z.number().min(0).max(1).default(1)}),Eo=Co.extend({type:l.z.literal("color"),color:l.z.string().default("#e4e4e4")}),Fo=l.z.object({width:l.z.number(),height:l.z.number(),left:l.z.number(),top:l.z.number()}),Xo=Co.extend({type:l.z.literal("image"),assetId:l.z.string(),crop:Fo.default({width:1,height:1,left:0,top:0})}),Ao=Co.extend({type:l.z.literal("none")}),To=l.z.discriminatedUnion("type",[Eo,Xo,Ao]),Do=l.z.discriminatedUnion("type",[Eo,Ao]),No=l.z.object({top:Lo.default({value:0,unit:"px"}),left:Lo.default({value:0,unit:"px"}),bottom:Lo.default({value:0,unit:"px"}),right:Lo.default({value:0,unit:"px"})}),qo=l.z.object({type:l.z.literal("rectangle"),borderRadius:l.z.object({topLeft:l.z.number(),topRight:l.z.number(),bottomRight:l.z.number(),bottomLeft:l.z.number()}).optional()}),Bo=l.z.object({type:l.z.literal("ellipse")}),Yo=l.z.object({type:l.z.literal("star"),sidePairs:l.z.number().min(3),innerRadius:l.z.number().min(.1).max(1)}),Mo=l.z.object({type:l.z.literal("cloud")}),Ko=l.z.object({type:l.z.literal("plus"),stroke:l.z.number().min(.01).max(1)}),$o=l.z.object({type:l.z.literal("triangle"),topVertex:l.z.number().min(0).max(1).optional()}),Go=l.z.object({type:l.z.literal("bookmark"),cutoutInset:l.z.number().min(0).max(.8)}),Ho=l.z.object({type:l.z.literal("chevron"),outsideCornerXCoords:l.z.number().min(.7).max(1),insideCenterXCoord:l.z.number().min(0).max(.3)}),Jo=l.z.object({type:l.z.literal("octagon")}),Qo=l.z.object({type:l.z.literal("parallelogram"),shear:l.z.number().min(0).max(1)}),Wo=l.z.object({type:l.z.literal("shield")}),Zo=l.z.object({type:l.z.literal("speechBubble")}),tl=l.z.object({type:l.z.literal("arrow"),thickness:l.z.number().min(.1).max(.5),headLength:l.z.number().min(.1).max(.9)}),el=l.z.discriminatedUnion("type",[Go,Ho,Mo,Bo,Jo,Ko,qo,Yo,$o,Qo,Wo,Zo,tl]),il=l.z.object({id:l.z.string(),name:l.z.string().max(128)}),nl=il.extend({x:Lo.default({value:0,unit:"px"}),y:Lo.default({value:0,unit:"px"}),xOffset:l.z.number().default(0),yOffset:l.z.number().default(0),position:l.z.literal("absolute").default("absolute"),width:Lo.default({value:100,unit:"%"}),height:Lo.default({value:100,unit:"%"}),padding:No,fill:To,overlay:Do,aspectRatioLocked:l.z.boolean(),border:Oo,clipDef:el.default({type:"rectangle"}),rotation:l.z.number().default(0),flipX:l.z.boolean().default(!1),flipY:l.z.boolean().default(!1),authoringAspectRatioCropLock:l.z.enum(["freeform","preset","none"])}),al=t=>l.z.intersection(il,t.partial()),ol=t=>l.z.intersection(l.z.object({default:t}),l.z.record(al(t))),ll=t=>l.z.object({id:l.z.string(),blockumentId:l.z.string(),clonedFromId:l.z.string().optional(),parentId:l.z.string(),type:l.z.string(),name:l.z.string().max(128),tagName:l.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:l.z.boolean().default(!1),authoringVisible:l.z.boolean().default(!0),initialVisible:l.z.boolean().default(!0),initialState:l.z.string().default("default"),states:ol(t),assets:l.z.record(_o).default({}).optional(),removed:l.z.boolean().default(!1),_v:l.z.literal(8)}),rl=(al(nl),l.z.object({default:l.z.string()})),zl=nl.extend({audioSources:rl}),dl=ll(zl).extend({type:l.z.literal("audio")}),ul=(al(zl),l.z.object({id:l.z.string(),clonedFromId:l.z.string().optional(),state:l.z.string(),visible:l.z.boolean()})),sl=l.z.object({id:l.z.string(),event:l.z.enum(["click","hover","mediaPlay","mediaPause","mediaEnd"]),sourceId:l.z.string().optional()}),cl=sl.extend({action:l.z.enum(["mediaPause","mediaPlay","mediaEnd"]),targetId:l.z.string()}),pl=sl.extend({action:l.z.literal("changeState"),targetId:l.z.string(),targetState:l.z.string().default("default")}),ml=sl.extend({action:l.z.literal("changeVisibility"),targetId:l.z.string(),targetVisibility:l.z.boolean()}),bl=l.z.discriminatedUnion("action",[pl,ml,cl]),gl=l.z.object({id:l.z.string(),title:l.z.string().max(255),children:l.z.array(ul).max(1),triggers:l.z.array(bl),fonts:l.z.record(l.z.string()).optional(),_v:l.z.literal(8)}),fl=nl.extend({children:l.z.array(ul)}),yl=ll(fl).extend({type:l.z.literal("group")}),xl=(al(fl),l.z.intersection(l.z.object({type:l.z.string().optional(),attrs:l.z.record(l.z.any()).optional(),content:l.z.array(l.z.lazy((()=>xl))).optional(),marks:l.z.array(l.z.intersection(l.z.object({type:l.z.string(),attrs:l.z.record(l.z.any()).optional()}),l.z.record(l.z.any()))).optional(),text:l.z.string().optional()}),l.z.record(l.z.any()))),hl=l.z.object({id:l.z.string(),type:l.z.literal("tiptap"),json:xl}),vl=l.z.enum(["top","middle","bottom"]),jl=l.z.object({top:l.z.number(),left:l.z.number(),bottom:l.z.number(),right:l.z.number()}),kl=nl.extend({text:hl,textVerticalAlign:vl.default("top"),textPadding:jl}),Il=ll(kl).extend({type:l.z.literal("text")}),Sl=(al(kl),kl.extend({altText:l.z.string().nullable().default(null)})),wl=ll(Sl).extend({type:l.z.literal("shape")}),Pl=(al(Sl),l.z.object({default:l.z.string()})),Rl=nl.extend({videoSources:Pl}),Ul=ll(Rl).extend({type:l.z.literal("video")}),Vl=(al(Rl),l.z.discriminatedUnion("type",[dl,yl,wl,Il,Ul])),_l=l.z.object({blockuments:l.z.record(gl).optional(),items:l.z.record(Vl).optional()});function Ll(t){return{...t,_v:8,assets:ve(t.assets??{},(t=>({...t,path:`mondrian/assets/${t.path}`})))}}const Ol=l.z.object({id:l.z.string(),path:l.z.string(),name:l.z.string(),width:l.z.number().optional(),height:l.z.number().optional()}),Cl=l.z.object({unit:l.z.enum(["px","%","auto","fr"]),value:l.z.number()}),El=l.z.object({applied:l.z.boolean().default(!1),type:l.z.enum(["none","fill"]).default("none"),color:l.z.string().default("#000000"),opacity:l.z.number().default(1),style:l.z.enum(["solid","dashed","dotted"]).default("solid"),width:Cl.default({value:1,unit:"px"})}),Fl=l.z.object({assetId:l.z.string().optional(),color:l.z.string().optional(),opacity:l.z.number().min(0).max(1).default(1)}),Xl=Fl.extend({type:l.z.literal("color"),color:l.z.string().default("#e4e4e4")}),Al=l.z.object({width:l.z.number(),height:l.z.number(),left:l.z.number(),top:l.z.number()}),Tl=Fl.extend({type:l.z.literal("image"),assetId:l.z.string(),crop:Al.default({width:1,height:1,left:0,top:0})}),Dl=Fl.extend({type:l.z.literal("none")}),Nl=l.z.discriminatedUnion("type",[Xl,Tl,Dl]),ql=l.z.discriminatedUnion("type",[Xl,Dl]),Bl=l.z.object({top:Cl.default({value:0,unit:"px"}),left:Cl.default({value:0,unit:"px"}),bottom:Cl.default({value:0,unit:"px"}),right:Cl.default({value:0,unit:"px"})}),Yl=l.z.object({type:l.z.literal("rectangle"),borderRadius:l.z.object({topLeft:l.z.number(),topRight:l.z.number(),bottomRight:l.z.number(),bottomLeft:l.z.number()}).optional()}),Ml=l.z.object({type:l.z.literal("ellipse")}),Kl=l.z.object({type:l.z.literal("star"),sidePairs:l.z.number().min(3),innerRadius:l.z.number().min(.1).max(1)}),$l=l.z.object({type:l.z.literal("cloud")}),Gl=l.z.object({type:l.z.literal("plus"),stroke:l.z.number().min(.01).max(1)}),Hl=l.z.object({type:l.z.literal("triangle"),topVertex:l.z.number().min(0).max(1).optional()}),Jl=l.z.object({type:l.z.literal("bookmark"),cutoutInset:l.z.number().min(0).max(.8)}),Ql=l.z.object({type:l.z.literal("chevron"),outsideCornerXCoords:l.z.number().min(.7).max(1),insideCenterXCoord:l.z.number().min(0).max(.3)}),Wl=l.z.object({type:l.z.literal("octagon")}),Zl=l.z.object({type:l.z.literal("parallelogram"),shear:l.z.number().min(0).max(1)}),tr=l.z.object({type:l.z.literal("shield")}),er=l.z.object({type:l.z.literal("speechBubble")}),ir=l.z.object({type:l.z.literal("arrow"),thickness:l.z.number().min(.1).max(.5),headLength:l.z.number().min(.1).max(.9)}),nr=l.z.discriminatedUnion("type",[Jl,Ql,$l,Ml,Wl,Gl,Yl,Kl,Hl,Zl,tr,er,ir]),ar=l.z.object({id:l.z.string(),name:l.z.string().max(128)}),or=ar.extend({x:Cl.default({value:0,unit:"px"}),y:Cl.default({value:0,unit:"px"}),xOffset:l.z.number().default(0),yOffset:l.z.number().default(0),position:l.z.literal("absolute").default("absolute"),width:Cl.default({value:100,unit:"%"}),height:Cl.default({value:100,unit:"%"}),padding:Bl,fill:Nl,overlay:ql,aspectRatioLocked:l.z.boolean(),border:El,clipDef:nr.default({type:"rectangle"}),rotation:l.z.number().default(0),flipX:l.z.boolean().default(!1),flipY:l.z.boolean().default(!1),authoringAspectRatioCropLock:l.z.enum(["freeform","preset","none"])}),lr=t=>l.z.intersection(ar,t.partial()),rr=t=>l.z.intersection(l.z.object({default:t}),l.z.record(lr(t))),zr=t=>l.z.object({id:l.z.string(),blockumentId:l.z.string(),clonedFromId:l.z.string().optional(),parentId:l.z.string(),type:l.z.string(),name:l.z.string().max(128),tagName:l.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:l.z.boolean().default(!1),authoringVisible:l.z.boolean().default(!0),initialVisible:l.z.boolean().default(!0),initialState:l.z.string().default("default"),states:rr(t),assets:l.z.record(Ol).default({}).optional(),removed:l.z.boolean().default(!1),_v:l.z.literal(9)}),dr=(lr(or),l.z.object({default:l.z.string()})),ur=or.extend({audioSources:dr}),sr=zr(ur).extend({type:l.z.literal("audio")}),cr=(lr(ur),l.z.object({id:l.z.string(),clonedFromId:l.z.string().optional()})),pr=l.z.object({id:l.z.string(),event:l.z.enum(["click","hover","mediaPlay","mediaPause","mediaEnd"]),sourceId:l.z.string().optional()}),mr=pr.extend({action:l.z.enum(["mediaPause","mediaPlay","mediaEnd"]),targetId:l.z.string()}),br=pr.extend({action:l.z.literal("changeState"),targetId:l.z.string(),targetState:l.z.string().default("default")}),gr=pr.extend({action:l.z.literal("changeVisibility"),targetId:l.z.string(),targetVisibility:l.z.boolean()}),fr=l.z.discriminatedUnion("action",[br,gr,mr]),yr=l.z.object({id:l.z.string(),title:l.z.string().max(255),children:l.z.array(cr).min(0).max(1),triggers:l.z.array(fr),fonts:l.z.record(l.z.string()).optional(),_v:l.z.literal(9)}),xr=or.extend({_groupBrand:l.z.never().optional()}),hr=zr(xr).extend({type:l.z.literal("group"),children:l.z.array(cr)}),vr=(lr(xr),l.z.intersection(l.z.object({type:l.z.string().optional(),attrs:l.z.record(l.z.any()).optional(),content:l.z.array(l.z.lazy((()=>vr))).optional(),marks:l.z.array(l.z.intersection(l.z.object({type:l.z.string(),attrs:l.z.record(l.z.any()).optional()}),l.z.record(l.z.any()))).optional(),text:l.z.string().optional()}),l.z.record(l.z.any()))),jr=l.z.object({id:l.z.string(),type:l.z.literal("tiptap"),json:vr}),kr=l.z.enum(["top","middle","bottom"]),Ir=l.z.object({top:l.z.number(),left:l.z.number(),bottom:l.z.number(),right:l.z.number()}),Sr=or.extend({text:jr,textVerticalAlign:kr.default("top"),textPadding:Ir}),wr=zr(Sr).extend({type:l.z.literal("text")}),Pr=(lr(Sr),Sr.extend({altText:l.z.string().nullable().default(null)})),Rr=zr(Pr).extend({type:l.z.literal("shape")}),Ur=(lr(Pr),l.z.object({default:l.z.string()})),Vr=or.extend({videoSources:Ur}),_r=zr(Vr).extend({type:l.z.literal("video")}),Lr=(lr(Vr),l.z.discriminatedUnion("type",[sr,hr,Rr,wr,_r])),Or=l.z.object({blockuments:l.z.record(yr).optional(),items:l.z.record(Lr).optional()});function Cr(t){return{...t,_v:9,children:t.children.map((({id:t,clonedFromId:e})=>({id:t,clonedFromId:e})))}}function Er(t){return"group"===t.type?function(t){const e=new Map,{default:i,...n}=t.states,a=[i,...Object.values(n)];for(const t of a)if(t.children)for(const{id:i,clonedFromId:n}of t.children)e.has(i)||e.set(i,{id:i,clonedFromId:n});return{...t,_v:9,children:[...e.values()],states:je(t.states,(({children:t,...e})=>e),(({children:t,...e})=>e))}}(t):{...t,_v:9}}const Fr=l.z.object({id:l.z.string(),path:l.z.string(),name:l.z.string(),width:l.z.number().optional(),height:l.z.number().optional()}),Xr=l.z.object({unit:l.z.enum(["px","%","auto","fr"]),value:l.z.number()}),Ar=l.z.object({applied:l.z.boolean().default(!1),type:l.z.enum(["none","fill"]).default("none"),color:l.z.string().default("#000000"),opacity:l.z.number().default(1),style:l.z.enum(["solid","dashed","dotted"]).default("solid"),width:Xr.default({value:1,unit:"px"})}),Tr=l.z.object({assetId:l.z.string().optional(),color:l.z.string().optional(),opacity:l.z.number().min(0).max(1).default(1)}),Dr=Tr.extend({type:l.z.literal("color"),color:l.z.string().default("#e4e4e4")}),Nr=l.z.object({width:l.z.number(),height:l.z.number(),left:l.z.number(),top:l.z.number()}),qr=Tr.extend({type:l.z.literal("image"),assetId:l.z.string(),crop:Nr.default({width:1,height:1,left:0,top:0})}),Br=Tr.extend({type:l.z.literal("none")}),Yr=l.z.discriminatedUnion("type",[Dr,qr,Br]),Mr=l.z.discriminatedUnion("type",[Dr,Br]),Kr=l.z.object({top:Xr.default({value:0,unit:"px"}),left:Xr.default({value:0,unit:"px"}),bottom:Xr.default({value:0,unit:"px"}),right:Xr.default({value:0,unit:"px"})}),$r=l.z.object({type:l.z.literal("rectangle"),borderRadius:l.z.object({topLeft:l.z.number(),topRight:l.z.number(),bottomRight:l.z.number(),bottomLeft:l.z.number()}).optional()}),Gr=l.z.object({type:l.z.literal("ellipse")}),Hr=l.z.object({type:l.z.literal("star"),sidePairs:l.z.number().min(3),innerRadius:l.z.number().min(.1).max(1)}),Jr=l.z.object({type:l.z.literal("cloud")}),Qr=l.z.object({type:l.z.literal("plus"),stroke:l.z.number().min(.01).max(1)}),Wr=l.z.object({type:l.z.literal("triangle"),topVertex:l.z.number().min(0).max(1).optional()}),Zr=l.z.object({type:l.z.literal("bookmark"),cutoutInset:l.z.number().min(0).max(.8)}),tz=l.z.object({type:l.z.literal("chevron"),outsideCornerXCoords:l.z.number().min(.7).max(1),insideCenterXCoord:l.z.number().min(0).max(.3)}),ez=l.z.object({type:l.z.literal("octagon")}),iz=l.z.object({type:l.z.literal("parallelogram"),shear:l.z.number().min(0).max(1)}),nz=l.z.object({type:l.z.literal("shield")}),az=l.z.object({type:l.z.literal("speechBubble")}),oz=l.z.object({type:l.z.literal("arrow"),thickness:l.z.number().min(.1).max(.5),headLength:l.z.number().min(.1).max(.9)}),lz=l.z.discriminatedUnion("type",[Zr,tz,Jr,Gr,ez,Qr,$r,Hr,Wr,iz,nz,az,oz]),rz=l.z.object({id:l.z.string(),name:l.z.string().max(128)}),zz=rz.extend({x:Xr.default({value:0,unit:"px"}),y:Xr.default({value:0,unit:"px"}),xOffset:l.z.number().default(0),yOffset:l.z.number().default(0),position:l.z.literal("absolute").default("absolute"),width:Xr.default({value:100,unit:"%"}),height:Xr.default({value:100,unit:"%"}),padding:Kr,fill:Yr,overlay:Mr,aspectRatioLocked:l.z.boolean(),border:Ar,clipDef:lz.default({type:"rectangle"}),rotation:l.z.number().default(0),flipX:l.z.boolean().default(!1),flipY:l.z.boolean().default(!1),authoringAspectRatioCropLock:l.z.enum(["freeform","preset","none"])}),dz=t=>l.z.intersection(rz,t.partial()),uz=t=>l.z.intersection(l.z.object({default:t}),l.z.record(dz(t))),sz=t=>l.z.object({id:l.z.string(),blockumentId:l.z.string(),clonedFromId:l.z.string().optional(),parentId:l.z.string(),type:l.z.string(),name:l.z.string().max(128),tagName:l.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:l.z.boolean().default(!1),authoringVisible:l.z.boolean().default(!0),initialVisible:l.z.boolean().default(!0),initialState:l.z.string().default("default"),states:uz(t),assets:l.z.record(Fr).default({}).optional(),removed:l.z.boolean().default(!1),_v:l.z.literal(10)}),cz=(dz(zz),l.z.object({default:l.z.string()})),pz=zz.extend({audioSources:cz}),mz=sz(pz).extend({type:l.z.literal("audio")}),bz=(dz(pz),l.z.object({id:l.z.string(),clonedFromId:l.z.string().optional()})),gz=l.z.object({id:l.z.string(),event:l.z.enum(["click","hover","mediaPlay","mediaPause","mediaEnd"]),sourceId:l.z.string().optional()}),fz=gz.extend({action:l.z.enum(["mediaPause","mediaPlay","mediaEnd"]),targetId:l.z.string()}),yz=gz.extend({action:l.z.literal("changeState"),targetId:l.z.string(),targetState:l.z.string().default("default")}),xz=gz.extend({action:l.z.literal("changeVisibility"),targetId:l.z.string(),targetVisibility:l.z.boolean()}),hz=l.z.discriminatedUnion("action",[yz,xz,fz]),vz=l.z.object({id:l.z.string(),title:l.z.string().max(255),children:l.z.array(bz).min(0).max(1),triggers:l.z.array(hz),fonts:l.z.record(l.z.string()).optional(),_v:l.z.literal(10)}),jz=l.z.object({x:l.z.number(),y:l.z.number()}),kz=l.z.object({applied:l.z.literal(!1)}),Iz=l.z.object({applied:l.z.literal(!0),offset:jz,blur:l.z.number().min(0),spread:l.z.number().min(0),color:l.z.string(),opacity:l.z.number().min(0).max(1)}),Sz=l.z.discriminatedUnion("applied",[kz,Iz]),wz=zz.extend({_groupBrand:l.z.never().optional()}),Pz=sz(wz).extend({type:l.z.literal("group"),children:l.z.array(bz)}),Rz=(dz(wz),l.z.intersection(l.z.object({type:l.z.string().optional(),attrs:l.z.record(l.z.any()).optional(),content:l.z.array(l.z.lazy((()=>Rz))).optional(),marks:l.z.array(l.z.intersection(l.z.object({type:l.z.string(),attrs:l.z.record(l.z.any()).optional()}),l.z.record(l.z.any()))).optional(),text:l.z.string().optional()}),l.z.record(l.z.any()))),Uz=l.z.object({id:l.z.string(),type:l.z.literal("tiptap"),json:Rz}),Vz=l.z.enum(["top","middle","bottom"]),_z=l.z.object({top:l.z.number(),left:l.z.number(),bottom:l.z.number(),right:l.z.number()}),Lz=zz.extend({text:Uz,textVerticalAlign:Vz.default("top"),textPadding:_z}),Oz=sz(Lz).extend({type:l.z.literal("text")}),Cz=(dz(Lz),Lz.extend({altText:l.z.string().nullable().default(null),dropShadow:Sz})),Ez=sz(Cz).extend({type:l.z.literal("shape")}),Fz=(dz(Cz),l.z.object({default:l.z.string()})),Xz=zz.extend({videoSources:Fz}),Az=sz(Xz).extend({type:l.z.literal("video")}),Tz=(dz(Xz),l.z.discriminatedUnion("type",[mz,Pz,Ez,Oz,Az])),Dz=l.z.object({blockuments:l.z.record(vz).optional(),items:l.z.record(Tz).optional()});function Nz(t){return"shape"===t.type?{...t,_v:10,states:je(t.states,(t=>({...t,dropShadow:{applied:!1}})),(t=>t))}:{...t,_v:10}}const qz=10,Bz=[{version:1,upgrade:function(t){return t},InputSchema:Y,OutputSchema:Y},{version:2,upgrade:function({blockuments:t,items:e}){const i=t??{},n=Object.values(e??{}).filter((t=>"triggers"in t)),a=Lt(n,"blockumentId"),o={},l={};for(const[t,e]of Object.entries(a)){const n=i[t];if(n){const t=e.flatMap((t=>(t.triggers??[]).map((e=>({...e,sourceId:t.id}))))),a={...n,triggers:t};o[a.id]=a,e.forEach((t=>{l[t.id]=Ot(t,"triggers")})),Object.entries(i).forEach((([t,e])=>{if(!(t in o)){const i={...e,triggers:[]};o[t]=i}}))}}return{blockuments:o,items:l}},InputSchema:Y,OutputSchema:Vt},{version:3,upgrade:function({blockuments:t,items:e}){return{blockuments:ve(t??{},(t=>({...t,_v:3}))),items:ve(e??{},Se)}},InputSchema:Vt,OutputSchema:xe},{version:4,upgrade:function(t){return{blockuments:ve(t.blockuments??{},(t=>({...t,_v:4}))),items:ve(t.items??{},vi)}},InputSchema:xe,OutputSchema:gi},{version:5,upgrade:function(t){return{blockuments:ve(t.blockuments??{},(t=>({...t,_v:5}))),items:ve(t.items??{},kn)}},InputSchema:gi,OutputSchema:xn},{version:6,upgrade:function(t){return{blockuments:ve(t.blockuments??{},(t=>({...t,_v:6}))),items:ve(t.items??{},wa)}},InputSchema:xn,OutputSchema:Ia},{version:7,upgrade:function(t){return{blockuments:ve(t.blockuments??{},(t=>({...t,_v:7}))),items:ve(t.items??{},Vo)}},InputSchema:Ia,OutputSchema:Ro},{version:8,upgrade:function(t){return{blockuments:ve(t.blockuments??{},(t=>({...t,_v:8}))),items:ve(t.items??{},Ll)}},InputSchema:Ro,OutputSchema:_l},{version:9,upgrade:function(t){return{blockuments:ve(t.blockuments??{},Cr),items:ve(t.items??{},Er)}},InputSchema:_l,OutputSchema:Or},{version:10,upgrade:function(t){return{blockuments:ve(t.blockuments??{},(t=>({...t,_v:10}))),items:ve(t.items??{},Nz)}},InputSchema:Or,OutputSchema:Dz}];function Yz(t){const e=Gz(t),i=$z(e).OutputSchema.safeParse(t);if(i.success&&e===qz)return i.data;if(i.success)return Mz(e,qz)(i.data);throw new Error("Unable to comply: no upgrade path was found",{cause:i.error})}function Mz(t,e){return n(Kz(t,e).map((({InputSchema:t,upgrade:e,OutputSchema:i})=>n(t.parse,e,i.parse))))}function Kz(t,e){const i=a(t+1,e+1),n=Bz.filter((({version:t})=>i.includes(t)));return o(n,"version")}function $z(t){const e=Bz.find((e=>e.version===t));if(!e)throw new Error("No converter found for claimed version");return e}function Gz(t){const e=t;let i=Object.values(e?.blockuments??{})[0]?._v??0;return 0===i&&(i=Object.values(e.blockuments).every((t=>t.triggers))?2:1),i}}}]);